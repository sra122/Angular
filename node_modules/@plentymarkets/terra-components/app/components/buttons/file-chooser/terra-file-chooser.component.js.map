{"version":3,"sources":["app/components/buttons/file-chooser/terra-file-chooser.component.ts"],"names":[],"mappings":"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","file":"terra-file-chooser.component.js","sourcesContent":["import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport { TranslationService } from 'angular-l10n';\nimport { isNullOrUndefined } from 'util';\nimport { TerraFileBrowserComponent } from '../../file-browser/terra-file-browser.component';\nimport { TerraButtonComponent } from '../button/terra-button.component';\nimport { TerraBaseStorageService } from '../../file-browser/terra-base-storage.interface';\nimport { TerraStorageObject } from '../../file-browser/model/terra-storage-object';\nimport { TerraOverlayComponent } from '../../layouts/overlay/terra-overlay.component';\nimport { TerraOverlayButtonInterface } from '../../layouts/overlay/data/terra-overlay-button.interface';\nimport { TerraFrontendStorageService } from '../../file-browser/terra-frontend-storage.service';\n\n@Component({\n    selector: 'terra-file-chooser',\n    template: require('./terra-file-chooser.component.html'),\n    styles: [require('./terra-file-chooser.component.scss')]\n})\nexport class TerraFileChooserComponent extends TerraButtonComponent\n{\n    @Input()\n    public set inputPrimaryBrowserButtonCaption(value:string)\n    {\n        this.primaryBrowserButtonCaption = value;\n    }\n\n    public get inputPrimaryBrowserButtonCaption():string\n    {\n        if ( !isNullOrUndefined(this.primaryBrowserButtonCaption) && this.primaryBrowserButtonCaption.length > 0)\n        {\n            return this.primaryBrowserButtonCaption;\n        }\n\n        return this.translation.translate(this.translationPrefix + '.choose');\n    }\n\n    @Input()\n    public set inputSecondaryBrowserButtonCaption(value:string)\n    {\n        this.primaryBrowserButtonCaption = value;\n    }\n\n    public get inputSecondaryBrowserButtonCaption():string\n    {\n        if ( !isNullOrUndefined(this.secondaryBrowserButtonCaption) && this.secondaryBrowserButtonCaption.length > 0)\n        {\n            return this.secondaryBrowserButtonCaption;\n        }\n\n        return this.translation.translate(this.translationPrefix + '.cancel');\n    }\n\n    @Input()\n    public inputAllowedExtensions:Array<string> = [];\n\n    @Input()\n    public inputAllowFolders:boolean = true;\n\n    @Input()\n    public set inputStorageServices(services:Array<TerraBaseStorageService>)\n    {\n        this.storageServices = services;\n    }\n\n    public get inputStorageServices():Array<TerraBaseStorageService>\n    {\n        return this.storageServices || [this.frontendStorageService];\n    }\n\n    @Output()\n    public outputSelected:EventEmitter<TerraStorageObject> = new EventEmitter<TerraStorageObject>();\n\n    @Output()\n    public outputCancelled:EventEmitter<void> = new EventEmitter<void>();\n\n    @Output()\n    public outputFileBrowserShow:EventEmitter<TerraFileBrowserComponent> = new EventEmitter<TerraFileBrowserComponent>();\n\n    @Output()\n    public outputFileBrowserHide:EventEmitter<TerraFileBrowserComponent> = new EventEmitter<TerraFileBrowserComponent>();\n\n    @ViewChild('overlay')\n    public overlay:TerraOverlayComponent;\n\n    @ViewChild('fileBrowser')\n    public fileBrowser:TerraFileBrowserComponent;\n\n    public primaryOverlayButton:TerraOverlayButtonInterface;\n\n    public secondaryOverlayButton:TerraOverlayButtonInterface;\n\n    private translationPrefix:string = 'terraFileInput';\n\n    private primaryBrowserButtonCaption:string = '';\n\n    private secondaryBrowserButtonCaption:string = '';\n\n    private selectedObject:TerraStorageObject;\n\n    private storageServices:Array<TerraBaseStorageService>;\n\n    constructor(private translation:TranslationService, private frontendStorageService:TerraFrontendStorageService)\n    {\n        super();\n\n        this.primaryOverlayButton = {\n            icon:          'icon-success',\n            caption:       this.inputPrimaryBrowserButtonCaption,\n            isDisabled:    true,\n            clickFunction: ():void =>\n            {\n                this.outputSelected.emit(this.selectedObject);\n                this.overlay.hideOverlay();\n            }\n        };\n\n        this.secondaryOverlayButton = {\n            icon: 'icon-close',\n            caption: this.inputSecondaryBrowserButtonCaption,\n            isDisabled: false,\n            clickFunction: ():void =>\n            {\n                this.outputCancelled.emit();\n                this.overlay.hideOverlay();\n            }\n        };\n    }\n\n    public onClick(event:Event):void\n    {\n        this.outputClicked.emit(event);\n        this.overlay.showOverlay();\n    }\n\n    public onSelectedObjectChange(selectedObject:TerraStorageObject):void\n    {\n        if(isNullOrUndefined(selectedObject) || selectedObject.isDirectory)\n        {\n            this.primaryOverlayButton.isDisabled = true;\n        }\n        else\n        {\n            this.primaryOverlayButton.isDisabled = false;\n            this.selectedObject = selectedObject;\n        }\n    }\n\n    public onBrowserShow():void\n    {\n        this.outputFileBrowserShow.emit(this.fileBrowser);\n    }\n\n    public onBrowserHide():void\n    {\n        this.outputFileBrowserHide.emit(this.fileBrowser);\n    }\n}\n"]}