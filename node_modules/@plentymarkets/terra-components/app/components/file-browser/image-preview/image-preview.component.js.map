{"version":3,"sources":["app/components/file-browser/image-preview/image-preview.component.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,sCAIuB;AACvB,sEAAmE;AACnE,gFAEyC;AAEzC,6BAAyC;AACzC,kGAA2F;AAO3F;IA4CI,oCAAoB,cAAgC;QAAhC,mBAAc,GAAd,cAAc,CAAkB;QAvC1C,sBAAiB,GAAU,kBAAkB,CAAC;QAE9C,aAAQ,GAAsB,EAAE,CAAC;QAEjC,cAAS,GAAW,IAAI,CAAC;IAqCnC,CAAC;IAhCD,sBAAW,0DAAkB;aAoB7B;YAEI,OAAO,IAAI,CAAC,mBAAmB,CAAC;QACpC,CAAC;aAvBD,UAA8B,MAAyB;YADvD,iBAmBC;YAhBG,IAAI,CAAC,mBAAmB,GAAG,MAAM,CAAC;YAClC,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAG,CAAC,wBAAiB,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,mBAAmB,YAAY,uEAA+B,EAChI;gBACI,IAAI,CAAC,mBAAmB,CAAC,WAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,UAAC,IAAuB;oBAE/E,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACrB,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;oBACvB,KAAI,CAAC,cAAc,CAAC,aAAa,EAAE,CAAC;gBACxC,CAAC,CAAC,CAAC;aACN;iBAED;gBACI,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;aAC1B;QACL,CAAC;;;OAAA;IAOD,sBAAc,0DAAkB;aAAhC;YAEI,OAAO,IAAI,CAAC,mBAAmB,YAAY,uEAA+B,CAAC;QAC/E,CAAC;;;OAAA;IAMS,mDAAc,GAAxB;QAEI,IAAG,IAAI,CAAC,mBAAmB,YAAY,uEAA+B,EACtE;YACI,IAAI,CAAC,mBAAmB,CAAC,cAAc,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACvF;IACL,CAAC;IAnDD;QADC,YAAK,EAAE;kCACmB,sDAAuB;2EAAC;IAWnD;QADC,YAAK,EAAE;kCAC6B,yCAAkB;yCAAlB,yCAAkB;wEAkBtD;IAhCQ,0BAA0B;QALtC,gBAAS,CAAC;YACP,QAAQ,EAAE,qBAAqB;YAC/B,QAAQ,EAAE,OAAO,CAAC,gCAAgC,CAAC;YACnD,MAAM,EAAI,CAAC,OAAO,CAAC,gCAAgC,CAAC,CAAC;SACxD,CAAC;yCA6CqC,wBAAiB;OA5C3C,0BAA0B,CAuDtC;IAAD,iCAAC;CAvDD,AAuDC,IAAA;AAvDY,gEAA0B","file":"image-preview.component.js","sourcesContent":["import {\n    ChangeDetectorRef,\n    Component,\n    Input\n} from '@angular/core';\nimport { TerraStorageObject } from '../model/terra-storage-object';\nimport {\n    TerraBaseStorageService\n} from '../terra-base-storage.interface';\nimport { TerraImageMetadata } from '../model/terra-image-metadata.interface';\nimport { isNullOrUndefined } from 'util';\nimport { TerraBaseMetadataStorageService } from '../terra-base-metadata-storage.interface';\n\n@Component({\n    selector: 'terra-image-preview',\n    template: require('./image-preview.component.html'),\n    styles:   [require('./image-preview.component.scss')]\n})\nexport class TerraImagePreviewComponent\n{\n    @Input()\n    public inputStorageService:TerraBaseStorageService;\n\n    protected translationPrefix:string = 'terraFileBrowser';\n\n    protected metadata:TerraImageMetadata = {};\n\n    protected isLoading:boolean = true;\n\n    private _inputStorageObject:TerraStorageObject;\n\n    @Input()\n    public set inputStorageObject(object:TerraStorageObject)\n    {\n        this._inputStorageObject = object;\n        this.metadata = {};\n        this.isLoading = true;\n        if(!isNullOrUndefined(object) && this.inputStorageService && this.inputStorageService instanceof TerraBaseMetadataStorageService)\n        {\n            this.inputStorageService.getMetadata(object.key).subscribe((data:TerraImageMetadata) =>\n            {\n                this.metadata = data;\n                this.isLoading = false;\n                this.changeDetector.detectChanges();\n            });\n        }\n        else\n        {\n            this.isLoading = false;\n        }\n    }\n\n    public get inputStorageObject():TerraStorageObject\n    {\n        return this._inputStorageObject;\n    }\n\n    protected get _canHandleMetadata():boolean\n    {\n        return this.inputStorageService instanceof TerraBaseMetadataStorageService;\n    }\n\n    constructor(private changeDetector:ChangeDetectorRef)\n    {\n    }\n\n    protected updateMetadata():void\n    {\n        if(this.inputStorageService instanceof TerraBaseMetadataStorageService)\n        {\n            this.inputStorageService.updateMetadata(this.inputStorageObject.key, this.metadata);\n        }\n    }\n}\n"]}