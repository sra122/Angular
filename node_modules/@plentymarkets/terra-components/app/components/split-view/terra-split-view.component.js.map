{"version":3,"sources":["app/components/split-view/terra-split-view.component.ts"],"names":[],"mappings":"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","file":"terra-split-view.component.js","sourcesContent":["import {\n    Component,\n    Input,\n    OnChanges,\n    OnDestroy,\n    SimpleChanges\n} from '@angular/core';\nimport { TerraSplitViewInterface } from './data/terra-split-view.interface';\nimport {\n    isNull,\n    isNullOrUndefined,\n    isUndefined\n} from 'util';\n\n/** @deprecated - please use `TerraMultiSplitViewComponent` instead */\n@Component({\n    selector: 'terra-split-view',\n    template: require('./terra-split-view.component.html'),\n    styles:   [require('./terra-split-view.component.scss'),\n               require('./terra-split-view.component.glob.scss').toString()\n    ]\n})\nexport class TerraSplitViewComponent implements OnChanges, OnDestroy\n{\n    public static ANIMATION_SPEED:number = 1000; // ms\n\n    @Input()\n    public inputModules:Array<TerraSplitViewInterface>;\n\n    @Input()\n    public inputShowBreadcrumbs:boolean;\n\n    @Input()\n    public inputUpdateViewport:boolean;\n\n    private breadCrumbsPath:string;\n\n    constructor()\n    {\n        this.inputShowBreadcrumbs = true; // default\n        this.breadCrumbsPath = '';\n        this.inputUpdateViewport = true;\n    }\n\n    public ngOnDestroy():void\n    {\n        this.inputModules.splice(0, this.inputModules.length);\n    }\n\n    public ngOnChanges(changes:SimpleChanges):void\n    {\n        if(this.inputUpdateViewport)\n        {\n            if(!isUndefined(changes['inputModules'].currentValue) && changes['inputModules'].currentValue.length > 0)\n            {\n                let currentModule:TerraSplitViewInterface = this.inputModules[this.inputModules.length - 1];\n                this.updateViewport(currentModule.mainComponentName + '_' + currentModule.instanceKey);\n            }\n\n            // init breadcrumb sliding\n            setTimeout(function():void\n            {\n                $('.terra-breadcrumbs').each(function():void\n                {\n                    $(this).find('li').each(function():void\n                    {\n                        /* tslint:disable:no-var-keyword */\n                        /* var is requires here (scope) */\n                        var viewContainer:JQuery = $(this).closest('.terra-breadcrumbs');\n                        var viewContainerOffsetLeft:number = viewContainer.offset().left;\n                        var viewContainerWidth:number = viewContainer.width();\n                        /* tslint:enable:no-var-keyword */\n\n                        $(this).off();\n                        $(this).mouseenter(function():void\n                        {\n                            let elementWidth:number = $(this).width();\n                            let elementOffsetLeft:number = $(this).offset().left;\n                            let viewContainerScrollLeft:number = viewContainer.scrollLeft();\n                            let offset:number = 0;\n\n                            if(elementOffsetLeft < viewContainer.offset().left)\n                            {\n                                offset = viewContainerScrollLeft + elementOffsetLeft;\n                            }\n                            else if(elementOffsetLeft + elementWidth + 30 > viewContainerOffsetLeft + viewContainerWidth)\n                            {\n                                offset = viewContainerScrollLeft + elementOffsetLeft + elementWidth + 30 - viewContainerWidth;\n                            }\n                            else\n                            {\n                                return;\n                            }\n\n                            viewContainer.stop();\n                            viewContainer.animate({scrollLeft: offset}, 1200);\n                        });\n                    });\n                });\n            });\n        }\n    }\n\n    private updateViewport(id:string):void\n    {\n        setTimeout(function():void\n        {\n            let anchor:JQuery = $('#' + id);\n            let breadcrumb:JQuery = $('.' + id);\n            let breadCrumbContainer:JQuery = breadcrumb.closest('.terra-breadcrumbs');\n            let viewContainer:JQuery = anchor.parent();\n            let offset:number = 3;\n            let prevSplitView:JQuery = breadcrumb.closest('.view').prev();\n\n            // update breadcrumbs\n            breadcrumb.closest('.terra-breadcrumbs').find('div').each(function():void\n            {\n                $(this).removeClass('active');\n            });\n\n            breadcrumb.addClass('active');\n\n            // focus breadcrumbs\n            if(!isNullOrUndefined(breadcrumb[0]))\n            {\n                breadCrumbContainer.stop();\n                breadCrumbContainer.animate(\n                    {scrollLeft: (breadcrumb[0].getBoundingClientRect().left + breadCrumbContainer.scrollLeft())},\n                    this.ANIMATION_SPEED);\n            }\n\n            // focus view\n            if(!isNullOrUndefined(viewContainer[0]) &&\n               anchor[0].getBoundingClientRect().left > viewContainer.scrollLeft() - offset &&\n               anchor[0].getBoundingClientRect().right <= viewContainer[0].getBoundingClientRect().right)\n            {\n                return;\n            }\n\n            // offset fix for navigator\n            if(!isNull(prevSplitView[0]))\n            {\n                offset = offset + prevSplitView.width() + (3 * offset);\n            }\n\n            // offset fix for overlay\n            if(!isNull($($(anchor[0].closest('.hasSplitView')).find(anchor))[0]))\n            {\n                offset = offset + ($(window).width() / 2 - viewContainer.width() / 2);\n            }\n\n            viewContainer.stop();\n            viewContainer.animate({scrollLeft: (anchor[0].getBoundingClientRect().left + viewContainer.scrollLeft() - offset)},\n                this.ANIMATION_SPEED);\n        });\n    }\n}\n"]}